# Library Management | Database Documentation

<br>

## Table of Contents
[Introduction](https://github.com/ilyaKarachun/library-management/blob/main/documentation-database.md#introduction)  

[Entity-Relantionship Diagram](https://github.com/ilyaKarachun/library-management/blob/main/documentation-database.md#entity-relantionship-diagram)

[Database Structure](https://github.com/ilyaKarachun/library-management/blob/main/documentation-database.md#database-structure)  
* [Tables](https://github.com/ilyaKarachun/library-management/blob/main/documentation-database.md#tables)
  * [Users](https://github.com/ilyaKarachun/library-management/blob/main/documentation-database.md#users)
  * [Borrowers](https://github.com/ilyaKarachun/library-management/blob/main/documentation-database.md#borrowers)
  * [Books](https://github.com/ilyaKarachun/library-management/blob/main/documentation-database.md#books)
  * [Authors](https://github.com/ilyaKarachun/library-management/blob/main/documentation-database.md#authors)
  * [Books_Borrowers](https://github.com/ilyaKarachun/library-management/blob/main/documentation-database.md#books_borrowers)
* [Relationships](https://github.com/ilyaKarachun/library-management/blob/main/documentation-database.md#relationships) 

<br>

## Introduction

The database was built using PostgreSQL and set up inside a Docker container, using the official PostgreSQL docker image. 

It will be accessed by the server-side application through the specified API Endpoints in the [documentation-api.md](https://github.com/ilyaKarachun/library-management/blob/main/documentation-api.md) file. 

This documentation provides an overview of the database structure, including the entities and their relationships, as well as a description of some attributes.

<br>

## Entity-Relantionship Diagram

*(Open the image for better visualization)*

![ERD](https://i.imgur.com/C2ZmiyK.png)

<br>

## Database Structure


## Tables

As it can be seen in the diagrams, this database has 4 entities: Users (library managers), Borrowers, Books and Authors, and a total of 5 tables (including the many-to-many relationship between Borrowers and Books: Books_Borrowers).

### Users

| Column      | Data Type     |
| ----------- | ------------- |
| user_id `PK`| SERIAL        |
| first_name  | varchar(50)   |
| last_name   | varchar(50)   |
| email       | varchar(256)  |
| hashed_pass | varchar(97)   |

- `user_id`: User ID auto incremental number generated by PostgreSQL.
- `hashed_pass`: Hashed password generated by Argon2 library.

### Borrowers

| Column            | Data Type     |
| ----------------- | ------------- |
| borrower_id `PK`  | SERIAL        |
| first_name        | varchar(50)   |
| last_name         | varchar(50)   |
| email             | varchar(256)  |

- `borrower_id`: Membership ID auto incremental number generated by PostgreSQL.

### Books

| Column            | Data Type     |
| ----------------- | ------------- |
| ISBN `PK`         | char(13)      |
| title             | varchar(100)  |
| author_id `FK`    | integer       |
| publication_year  | smallint      |
| is_available      | boolean       |

- `ISBN`: International Standard Book Number. It's a 13 digits unique code.

### Authors

| Column            | Data Type     |
| ----------------- | ------------- |
| author_id `PK`    | SERIAL        |
| first_name        | varchar(50)   |
| last_name         | varchar(50)   |


### Books_Borrowers

| Column             | Data Type |
| ------------------ | ----------|
| ISBN `PFK`         | char(13)  |
| borrower_id `PFK`  | integer   |
| borrowing_date     | timestamp |
| due_date           | timestamp |
| returned_date      | timestamp |

- `{ISBN, borrower_id}`: Composite Key for the table.
- `borrowing_date`: Date on which the book was borrowed from the library.
- `due_date`: Date on which the book must be returned to the library.
- `returned_date`: Date on which the borrower returned the book to the library.


<br>

## Relationships

- *Books* has a one-to-many relationship with *Authors* because a book can have only one author but an Author can write many books.

- *Books* has a many-to-many relationship with *Borrowers* because a book can be borrowed many times and a borrower can make many borrowings.